<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
    <channel>
        <title>A Simple Blog</title>
        <link>https://mrjoh3.github.io/</link>
        <description>Recent content on A Simple Blog</description>
        <generator>Hugo -- gohugo.io</generator>
        <language>en-us</language>
        <lastBuildDate>Thu, 24 Jun 2021 00:00:00 +0000</lastBuildDate><atom:link href="https://mrjoh3.github.io/index.xml" rel="self" type="application/rss+xml" /><item>
        <title>Changing and modifying a Hugo theme on your R Blogdown site</title>
        <link>https://mrjoh3.github.io/p/updating-a-blog-theme/</link>
        <pubDate>Thu, 24 Jun 2021 00:00:00 +0000</pubDate>
        
        <guid>https://mrjoh3.github.io/p/updating-a-blog-theme/</guid>
        <description>&lt;img src="https://mrjoh3.github.io/img/DSCN1968_edited-1_20070804_165511_002.jpg" alt="Featured image of post Changing and modifying a Hugo theme on your R Blogdown site" /&gt;
&lt;script src=&#34;https://mrjoh3.github.io/p/updating-a-blog-theme/index.en_files/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;


&lt;p&gt;In an effort to resurrect my long neglected &lt;code&gt;blogdown&lt;/code&gt; site, I decided to switch to a new theme. It is possible to use &lt;code&gt;blogdown::install_theme()&lt;/code&gt; to get you started adding a new theme. But I wanted to do the update manually and then start to modify the theme to suit my needs. For &lt;code&gt;R&lt;/code&gt; coders sometimes other languages and interacting with &lt;code&gt;HTML&lt;/code&gt; and &lt;code&gt;CSS&lt;/code&gt; can be intimidating but the results are very satisfying. I also think that tools like &lt;code&gt;rmarkdown&lt;/code&gt; and &lt;code&gt;shiny&lt;/code&gt; have forced us to know enough about web languages to work things out. This post is a record of the steps I took to change to and then modify a new Hugo theme, plus some of the small gotcha’s I encountered along the way.&lt;/p&gt;
&lt;div id=&#34;first-find-a-good-theme&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;First find a good theme&lt;/h2&gt;
&lt;p&gt;On the &lt;a href=&#34;https://themes.gohugo.io/&#34;&gt;Hugo themes website&lt;/a&gt; there are almost 300 to choose from. The themes website is well designed so it is easy to filter and sort to find the theme you are after. Make sure you find one with good documentation and an example website for you to better understand how it all fits together. Not all documentation is created equally so it is worth taking the time at the start to work through it.&lt;/p&gt;
&lt;p&gt;Another thing to remember is that themes can have different requirements for structuring your blogs content. So also check the example website’s structure to assess how much effort is required to adapt your site.&lt;/p&gt;
&lt;p&gt;In my work life I generally have to use standard corporate themes. My previous theme was the wonderful &lt;a href=&#34;https://themes.gohugo.io/future-imperfect/&#34;&gt;future imperfect&lt;/a&gt; but this time I wanted to try something darker and something good for displaying photos. I also wanted a theme that:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;is responsive and looks good on a phone&lt;/li&gt;
&lt;li&gt;is good for displaying photos&lt;/li&gt;
&lt;li&gt;has a good simple search function&lt;/li&gt;
&lt;li&gt;displays tags nicely&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Eventually I decided on the &lt;a href=&#34;https://themes.gohugo.io/hugo-theme-stack/&#34;&gt;stack theme&lt;/a&gt; by &lt;a href=&#34;https://jimmycai.com/&#34;&gt;Jimmy Cai&lt;/a&gt;. Some extra features that clinched the deal were:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;ability to toggle between light and dark themes&lt;/li&gt;
&lt;li&gt;local search&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://photoswipe.com/&#34;&gt;PhotoSwipe&lt;/a&gt; integration&lt;/li&gt;
&lt;li&gt;an archive page template&lt;/li&gt;
&lt;li&gt;no built in JavaScript or CSS frameworks&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;This last point, I hope, will lead to less conflicts when adding &lt;code&gt;htmlwidgets&lt;/code&gt; to posts.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;import-new-theme&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Import new theme&lt;/h2&gt;
&lt;p&gt;To import the theme I just followed the &lt;a href=&#34;https://docs.stack.jimmycai.com/getting-started&#34;&gt;documentation&lt;/a&gt; and imported the theme using git clone before setting up the theme as a sub-module.&lt;/p&gt;
&lt;pre class=&#34;console&#34;&gt;&lt;code&gt;git clone https://github.com/CaiJimmy/hugo-theme-stack/ themes/hugo-theme-stack

git submodule add https://github.com/CaiJimmy/hugo-theme-stack/ themes/hugo-theme-stack&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;These are the usual instructions for adding a theme. But adding the theme as a sub-module is optional. You will need to make some changes to the contents of the theme and you will also want to keep track of these changes in git. Using the code above the sub-module points to the original source, but you may not want to push your changes to this repo.&lt;/p&gt;
&lt;p&gt;After a while I removed the sub-module and added the theme to the sites repo. To do this you need to use the &lt;code&gt;git deinit&lt;/code&gt; command but you also need to delete cached files from the git repo. I did this based on a &lt;a href=&#34;https://stackoverflow.com/a/26752628/1498485&#34;&gt;Stack Overflow answer&lt;/a&gt; which is copied below.&lt;/p&gt;
&lt;pre class=&#34;console&#34;&gt;&lt;code&gt;mv themes/hugo-theme-stack themes/hugo-theme-stack_tmp
git themes/hugo-theme-stack deinit themes/hugo-theme-stack
git rm --cached themes/hugo-theme-stack
mv themes/hugo-theme-stack_tmp subfolder
git add themes/hugo-theme-stack&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;update-the-config-file&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Update the Config file&lt;/h2&gt;
&lt;p&gt;Now it is time to update your sites &lt;code&gt;config.toml&lt;/code&gt; or &lt;code&gt;config.yaml&lt;/code&gt; file. Remember we selected a theme that has an example website. So rename your old &lt;code&gt;config&lt;/code&gt; file and copy across the one from the new theme example. Then you can go through updating the new &lt;code&gt;config&lt;/code&gt; file based on the old one. With luck this will be enough to get your site running using &lt;code&gt;blogdown::build_site()&lt;/code&gt; then &lt;code&gt;blogdown::serve_site()&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;update-site-structure&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Update site structure&lt;/h2&gt;
&lt;p&gt;At this stage it becomes pretty obvious what is working and what is not. For me, the new theme had a different structure to deal with pages like &lt;code&gt;about&lt;/code&gt;. Using the new &lt;code&gt;config&lt;/code&gt; file and the structure of the example site I was able to adapt to this pretty easily.&lt;/p&gt;
&lt;p&gt;The biggest issue I had was trying to update the page logo. This is just a &lt;code&gt;.jpg&lt;/code&gt; file for both the old and new theme. It took a long time to realise that the new theme expected this file to be in the &lt;code&gt;themes/hugo-theme-stack/assets/img&lt;/code&gt; folder when the old theme expected it to be in &lt;code&gt;static/img&lt;/code&gt;. In both cases you refer to the file using &lt;code&gt;img/logo.jpg&lt;/code&gt;, so I could not understand what I was doing wrong.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;exploring-the-theme-contents&#34; class=&#34;section level1&#34;&gt;
&lt;h1&gt;Exploring the Theme contents&lt;/h1&gt;
&lt;p&gt;It is worth having a good idea of the structure and the files in the theme. There will be lots of instances where it is best to make changes in the theme as this will cascade through the site. For example, I wanted to use &lt;a href=&#34;https://highlightjs.org/&#34;&gt;highlight.js&lt;/a&gt; for syntax highlighting. This can be done with 3 lines of code:&lt;/p&gt;
&lt;pre class=&#34;html&#34;&gt;&lt;code&gt;&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/styles/a11y-dark.min.css&amp;quot;&amp;gt;
&amp;lt;script src=&amp;quot;https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/highlight.min.js&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;
&amp;lt;script&amp;gt;hljs.highlightAll();&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Of course you can add this to each post, but if you add it to the theme it becomes available to all posts. This are where &lt;a href=&#34;https://gohugo.io/templates/partials/&#34;&gt;Hugo partial templates&lt;/a&gt; become really powerful. A partial is a small html template. On build all of the partials get joined together to form the full page. These small chunks are much easier to maintain and are often parametised and will vary depending on site and page settings and content.&lt;/p&gt;
&lt;p&gt;In the &lt;code&gt;themes/hugo-theme-stack/layouts/partials/head&lt;/code&gt; folder, there is a file called &lt;code&gt;script.html&lt;/code&gt;. In the base theme the file is empty but is intended to be modified. There were also files called:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;head.html&lt;/li&gt;
&lt;li&gt;custom.html&lt;/li&gt;
&lt;li&gt;style.html&lt;/li&gt;
&lt;/ul&gt;
&lt;style&gt;
.right {
  display: block;
  float: right;
  width: 20%;
}
&lt;/style&gt;
&lt;p&gt;&lt;img class = &#34;right&#34; src=&#34;../../fav2/favicon.svg&#34;/&gt;&lt;/p&gt;
&lt;p&gt;I used the &lt;code&gt;custom.html&lt;/code&gt; file to include all the links needed to add a &lt;code&gt;favicon&lt;/code&gt; to my site. The &lt;code&gt;svg&lt;/code&gt; for the &lt;code&gt;favicon&lt;/code&gt; was created in &lt;code&gt;Inkscape&lt;/code&gt;, then I used &lt;a href=&#34;https://realfavicongenerator.net/&#34;&gt;RealFaviconGenerator&lt;/a&gt; to convert to a &lt;code&gt;favicon&lt;/code&gt;. This is the same service behind &lt;code&gt;pkgdown&lt;/code&gt;’s &lt;a href=&#34;https://pkgdown.r-lib.org/reference/build_favicons.html&#34;&gt;pkgdown::build_favicon()&lt;/a&gt; function.&lt;/p&gt;
&lt;p&gt;The last change to the theme I made (for now) was to add the read time for each article at the top of the page. Reading time is available in the Hugo &lt;a href=&#34;https://gohugo.io/variables/page/&#34;&gt;page variable&lt;/a&gt; &lt;code&gt;.ReadingTime&lt;/code&gt;. Hugo calculates reading time as &lt;code&gt;(words + 212) / 213&lt;/code&gt;. After looking through all the files in the theme, I found that the &lt;code&gt;themes/hugo-theme-stack/layouts/partials/article/components/details&lt;/code&gt; contained all of the page information such as title, description, and publish date. After finding the place to put the reading time I only need to add the following two &lt;code&gt;span&lt;/code&gt; tags to get a book icon and the calculated read time.&lt;/p&gt;
&lt;pre class=&#34;html&#34;&gt;&lt;code&gt;&amp;lt;span&amp;gt;{{ partial &amp;quot;helper/icon&amp;quot; &amp;quot;book&amp;quot; }}&amp;lt;/span&amp;gt;
&amp;lt;span class=&amp;quot;meta__text post-word-count&amp;quot;&amp;gt;{{ .ReadingTime }} min read&amp;lt;/span&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The book icon was not a standard part of the theme. Luckily in the stack theme all of the icons have been generated using &lt;a href=&#34;https://tablericons.com/&#34;&gt;Tabler Icons&lt;/a&gt; and so it was easy create one that matched perfectly.&lt;/p&gt;
&lt;div id=&#34;add-comments&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Add comments&lt;/h2&gt;
&lt;p&gt;In my previous site I used &lt;a href=&#34;https://blog.disqus.com/&#34;&gt;Disqus&lt;/a&gt; for comments but this time I wanted to try &lt;a href=&#34;https://utteranc.es/&#34;&gt;utterances&lt;/a&gt;. Utterances uses Github issues to manage comments. As my site is in a Github repo and is hosted via Github pages, it made sense to have one less account to manage. First the utterances app needs to be &lt;a href=&#34;https://github.com/apps/utterances&#34;&gt;installed&lt;/a&gt; onto the repo where you want the comments to go. Then you can use the &lt;a href=&#34;https://utteranc.es/&#34;&gt;utterances&lt;/a&gt; configuration site to generate a code snippet that needs to be inserted into each page.&lt;/p&gt;
&lt;pre class=&#34;html&#34;&gt;&lt;code&gt;&amp;lt;script src=&amp;quot;https://utteranc.es/client.js&amp;quot;
        repo=&amp;quot;[ENTER REPO HERE]&amp;quot;
        issue-term=&amp;quot;pathname&amp;quot;
        theme=&amp;quot;github-light&amp;quot;
        crossorigin=&amp;quot;anonymous&amp;quot;
        async&amp;gt;
&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Again, the &lt;code&gt;stack&lt;/code&gt; theme was a good choice as utterances is already part of the theme. All I needed to do to configure was add the code below to the &lt;code&gt;config.yaml&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;yaml&#34;&gt;&lt;code&gt;    comments:
        enabled: true
        provider: utterances
        utterances:
            repo: mrjoh3/blog
            issueTerm: pathname
            label: comment&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;time-to-add-content&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Time to add content&lt;/h2&gt;
&lt;p&gt;And that, as they say, was that. The site is up and running with the new theme. I have made some minor changes to the theme and am quite happy. Really, where I did have issues I should have read the documentation more carefully. At the start of this post I said “pick a theme with good documentation and an example site.” While updating and modifying the theme I have been referring the the &lt;a href=&#34;https://docs.stack.jimmycai.com/&#34;&gt;theme documentation&lt;/a&gt; regularly. It is always helpful, plus the example site meant I saved an enormous amount of time when restructuring the site to suite the theme.&lt;/p&gt;
&lt;p&gt;Now that I am up and running, I just need to get to the hard part of adding content. Hopefully this post is a good start.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
        </item>
        <item>
        <title>Shiny and Rmarkdown Image Galleries</title>
        <link>https://mrjoh3.github.io/p/shiny-image-gallery-examples/</link>
        <pubDate>Sat, 19 Jun 2021 00:00:00 +0000</pubDate>
        
        <guid>https://mrjoh3.github.io/p/shiny-image-gallery-examples/</guid>
        <description>&lt;img src="https://mrjoh3.github.io/img/MRJ_2020_DSC9961.png" alt="Featured image of post Shiny and Rmarkdown Image Galleries" /&gt;
&lt;script src=&#34;https://mrjoh3.github.io/p/shiny-image-gallery-examples/index_files/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;


&lt;link rel=&#34;stylesheet&#34; href=&#34;www/lightbox-2-2.11.3/css/lightbox.min.css&#34;&gt;
&lt;script src=&#34;www/lightbox-2-2.11.3/js/lightbox-plus-jquery.min.js&#34;&gt;&lt;/script&gt;
&lt;p&gt;Some time ago I had to implement an image gallery within a &lt;code&gt;shiny&lt;/code&gt; application. A simple grid of small thumbnail images where clicking opens the full image. Nothing complicated, but I did have several requirements:&lt;/p&gt;
&lt;ol style=&#34;list-style-type: decimal&#34;&gt;
&lt;li&gt;The gallery needed to render from a folder of images&lt;/li&gt;
&lt;li&gt;The gallery interface and thumbnails needed to be responsive&lt;/li&gt;
&lt;li&gt;The gallery needed to link to other &lt;code&gt;shiny&lt;/code&gt; UI&lt;/li&gt;
&lt;li&gt;Images come from one location, no need for generating thumbnails&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;There is a wide variety of javascript image gallery implementations. To start with I looked at &lt;a href=&#34;https://lokeshdhakar.com/projects/lightbox2/&#34;&gt;Lightbox&lt;/a&gt; and &lt;a href=&#34;http://photoswipe.com/&#34;&gt;PhotoSwipe&lt;/a&gt;. &lt;code&gt;Lightbox&lt;/code&gt; was the easiest to use and many other &lt;code&gt;JS&lt;/code&gt; libraries are based on it. &lt;code&gt;Photoswipe&lt;/code&gt; is also very popular with a very nice UI, zoom and touch integration plus an extensive API. Both are available under MIT licences. Unfortunately my javascript is limited and I did not have enough time to get more than the most basic &lt;code&gt;Photoswipe&lt;/code&gt; gallery to work. But, the &lt;code&gt;Lightbox&lt;/code&gt; gallery works very nicely. Here, I will focus on the &lt;code&gt;Lightbox&lt;/code&gt; implementation.&lt;/p&gt;
&lt;p&gt;This work was eventually built into a &lt;a href=&#34;https://mrjoh3.shinyapps.io/shiny-gallery-example/&#34;&gt;shiny app&lt;/a&gt; so you can see the galleries in action. I have also wrapped the code in the &lt;a href=&#34;https://github.com/mrjoh3/gallerier&#34;&gt;gallerier&lt;/a&gt; package. &lt;code&gt;Gallerier&lt;/code&gt; can be used in both &lt;code&gt;shiny&lt;/code&gt; and &lt;code&gt;rmarkdown&lt;/code&gt; documents. Code for the original &lt;code&gt;shiny&lt;/code&gt; app is on &lt;a href=&#34;https://github.com/mrjoh3/shiny-gallery-example&#34;&gt;Github&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;gallerier&lt;/code&gt; is very much a work in progress and more proof-of-concept than usable package. Please use it if you wish and let me know how you get on. The package also has some other functionality for creating &lt;a href=&#34;https://www.w3schools.com/howto/howto_css_cards.asp&#34;&gt;card packs&lt;/a&gt;, but I will discuss this in a separate post.&lt;/p&gt;
&lt;div id=&#34;using-lightbox-in-r&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Using Lightbox in R&lt;/h2&gt;
&lt;p&gt;The great thing about &lt;code&gt;Lightbox&lt;/code&gt; is that the setup is relatively easy. For a gallery all it requires is the creation of a structured “image set”. The “image set” defines the location of the images and any metadata you wish to display. If you look at the &lt;a href=&#34;https://lokeshdhakar.com/projects/lightbox2/#getting-started&#34;&gt;Lightbox documentation&lt;/a&gt; the “image set” is a group of image links that look like this:&lt;/p&gt;
&lt;pre class=&#34;html&#34;&gt;&lt;code&gt;&amp;lt;a href=&amp;quot;images/image-2.jpg&amp;quot; data-lightbox=&amp;quot;roadtrip&amp;quot;&amp;gt;Image #2&amp;lt;/a&amp;gt;
&amp;lt;a href=&amp;quot;images/image-3.jpg&amp;quot; data-lightbox=&amp;quot;roadtrip&amp;quot;&amp;gt;Image #3&amp;lt;/a&amp;gt;
&amp;lt;a href=&amp;quot;images/image-4.jpg&amp;quot; data-lightbox=&amp;quot;roadtrip&amp;quot;&amp;gt;Image #4&amp;lt;/a&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;To to recreate this in &lt;code&gt;R&lt;/code&gt;, add all the required details to a &lt;code&gt;data.frame&lt;/code&gt;. Then iterate over the rows and using &lt;code&gt;htmltools&lt;/code&gt; create a &lt;code&gt;taglist&lt;/code&gt;.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;tagList(
  lapply(seq_len(nrow(df)), function(i){
    tags$a(id = &amp;#39;image ID&amp;#39;,
           href = &amp;#39;path to image&amp;#39;,
           `data-lightbox` = &amp;#39;gallery group name&amp;#39;, 
           `data-title` = &amp;#39;metadata to display&amp;#39;, 
           tags$img(class = &amp;#39;card-img-top&amp;#39;,
                    src = &amp;#39;path to image&amp;#39;,
                    width = &amp;#39;image width px&amp;#39;),
                    height = &amp;#39;auto&amp;#39;)
  })
)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The &lt;a href=&#34;https://github.com/mrjoh3/gallerier/blob/master/R/lightbox.R&#34;&gt;code&lt;/a&gt; in &lt;code&gt;gallerier&lt;/code&gt; also adds each image to a &lt;a href=&#34;https://www.w3schools.com/howto/howto_css_cards.asp&#34;&gt;HTML card&lt;/a&gt;. This makes it a little easier to format the images and make the gallery look nice and consistent; plus it makes the gallery responsive to small screens and changes in screen size.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;an-example&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;An Example&lt;/h2&gt;
&lt;p&gt;In this example we iterate over a folder of images and extract some metadata from the image file name. We also add an id key using &lt;code&gt;hashids::encode()&lt;/code&gt; as each image tag needs a unique id for the &lt;code&gt;lightbox&lt;/code&gt; gallery. This is particularly important where you have multiple galleries on one page. The only required field in the &lt;code&gt;data.frame&lt;/code&gt; is the &lt;code&gt;src&lt;/code&gt; field. Any other fields will be joined together to form the metadata description that displays under each image after it is selected.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(dplyr)
library(lubridate)
library(hashids)
library(gallerier)

images &amp;lt;- data.frame(src = list.files(&amp;#39;www/img&amp;#39;)) %&amp;gt;%
  tidyr::separate(col = &amp;#39;src&amp;#39;, 
                  c(&amp;#39;txt&amp;#39;, &amp;#39;date&amp;#39;, &amp;#39;time&amp;#39;, &amp;#39;msec&amp;#39;), 
                  sep = &amp;#39;_|\\.&amp;#39;, 
                  remove = FALSE) %&amp;gt;%
  rowwise() %&amp;gt;%
  mutate(date = as.character(lubridate::ymd(date)),
         key = hashids::encode(1e3 + as.integer(msec), 
                               hashid_settings(salt = &amp;#39;this is my salt&amp;#39;)))

knitr::kable(head(images))&lt;/code&gt;&lt;/pre&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr class=&#34;header&#34;&gt;
&lt;th align=&#34;left&#34;&gt;src&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;txt&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;date&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;time&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;msec&lt;/th&gt;
&lt;th align=&#34;left&#34;&gt;key&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;IMG_20181019_131513_230.jpg&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;IMG&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2018-10-19&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;131513&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;230&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;Vvm&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;IMG_20181022_160737_185.jpg&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;IMG&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2018-10-22&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;160737&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;185&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;MQB&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;IMG_20181024_180354_405.jpg&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;IMG&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2018-10-24&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;180354&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;405&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;rQV&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;IMG_20181024_180354_425.jpg&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;IMG&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2018-10-24&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;180354&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;425&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;mZR&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;odd&#34;&gt;
&lt;td align=&#34;left&#34;&gt;IMG_20181024_180354_432.jpg&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;IMG&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2018-10-24&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;180354&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;432&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;3LY&lt;/td&gt;
&lt;/tr&gt;
&lt;tr class=&#34;even&#34;&gt;
&lt;td align=&#34;left&#34;&gt;IMG_20181024_183858_737.jpg&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;IMG&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;2018-10-24&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;183858&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;737&lt;/td&gt;
&lt;td align=&#34;left&#34;&gt;WK4&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;Then we pass the &lt;code&gt;data.frame&lt;/code&gt; to &lt;code&gt;gallerier::lightbox_gallery()&lt;/code&gt; and tell it where the images can be found relative to the final &lt;code&gt;HTML&lt;/code&gt; page. This can sometimes take a couple of goes to get right depending on which framework you are using. For &lt;code&gt;shiny&lt;/code&gt; the images will need to be in a &lt;code&gt;www/img&lt;/code&gt; folder. But the &lt;code&gt;www&lt;/code&gt; is dropped within shiny so the referenced path would be &lt;code&gt;img/&lt;/code&gt;. For &lt;code&gt;rmarkdown&lt;/code&gt; the &lt;code&gt;www&lt;/code&gt; does not get dropped, so &lt;code&gt;path=&#39;www/img&#39;&lt;/code&gt;. This blog is created using &lt;code&gt;blogdown&lt;/code&gt; and so the images need to be in the &lt;code&gt;static&lt;/code&gt; folder, but are then referenced as &lt;code&gt;path=&#39;../../img/&#39;&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;some-gotchas&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Some Gotcha’s&lt;/h2&gt;
&lt;p&gt;As indicated above, referring to the image location can be quite variable. This is also the case for referring to the required &lt;code&gt;JavaScript&lt;/code&gt; and &lt;code&gt;CSS&lt;/code&gt; files. In &lt;code&gt;shiny&lt;/code&gt;, &lt;code&gt;gallerier::lightbox_gallery()&lt;/code&gt; embeds all the required files, but this does not work in &lt;code&gt;rmarkdown&lt;/code&gt;. At least, I have not managed to get it to work. What does work is explicitly referencing the files at the top of the &lt;code&gt;.Rmd&lt;/code&gt; file.&lt;/p&gt;
&lt;pre class=&#34;html&#34;&gt;&lt;code&gt;&amp;lt;link rel=&amp;quot;stylesheet&amp;quot; href=&amp;quot;www/lightbox-2-2.11.3/css/lightbox.min.css&amp;quot;&amp;gt;
&amp;lt;script src=&amp;quot;www/lightbox-2-2.11.3/js/lightbox-plus-jquery.min.js&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You will notice in the code above I referenced the &lt;code&gt;JS&lt;/code&gt; file &lt;code&gt;lightbox-plus-jquery.min.js&lt;/code&gt;. This is because the &lt;code&gt;Hugo&lt;/code&gt; theme that this blog uses does not include &lt;code&gt;jquery&lt;/code&gt;, luckily this file has it embedded. If you are using &lt;code&gt;shiny&lt;/code&gt; or &lt;code&gt;rmarkdown&lt;/code&gt;, &lt;code&gt;jquery&lt;/code&gt; is already available, so you would refer to &lt;code&gt;lightbox.min.js&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;the-gallery&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;The Gallery&lt;/h2&gt;
&lt;p&gt;Below is the final result. I am pretty happy with the look of the gallery and the functionality of &lt;code&gt;lightbox&lt;/code&gt;. Getting this to work in &lt;code&gt;shiny&lt;/code&gt; was straight forward and &lt;code&gt;rmarkdown&lt;/code&gt; was not too bad. But I did have a very hard time with &lt;code&gt;blogdown&lt;/code&gt;. Mostly it took far too long for me to realise that &lt;code&gt;jquery&lt;/code&gt; was missing as I had not had to load it in the other frameworks.&lt;/p&gt;
&lt;p&gt;To render the gallery pass the &lt;code&gt;data.frame&lt;/code&gt; to the &lt;code&gt;lightbox_gallery()&lt;/code&gt; function. Give the gallery a name, define the image file path, and that is it.&lt;/p&gt;
&lt;div style=&#34;display: TRUE;&#34;&gt;
&lt;div class=&#34;card-deck&#34;&gt;
&lt;div data-type=&#34;template&#34; class=&#34;card&#34;&gt;
&lt;a id=&#34;ef8a6&#34; href=&#34;../../img/IMG_20181019_131513_230.jpg&#34; data-lightbox=&#34;name-of-gallery&#34; data-title=&#34;IMG_20181019_131513_230.jpg - IMG - 2018-10-19 - 131513 - 230 - Vvm - ef8a6&#34;&gt;
&lt;img class=&#34;card-img-top&#34; src=&#34;../../img/IMG_20181019_131513_230.jpg&#34; width=&#34;80px&#34; height=&#34;auto&#34;/&gt;
&lt;/a&gt;
&lt;/div&gt;
&lt;div data-type=&#34;template&#34; class=&#34;card&#34;&gt;
&lt;a id=&#34;ef8a6&#34; href=&#34;../../img/IMG_20181022_160737_185.jpg&#34; data-lightbox=&#34;name-of-gallery&#34; data-title=&#34;IMG_20181022_160737_185.jpg - IMG - 2018-10-22 - 160737 - 185 - MQB - ef8a6&#34;&gt;
&lt;img class=&#34;card-img-top&#34; src=&#34;../../img/IMG_20181022_160737_185.jpg&#34; width=&#34;80px&#34; height=&#34;auto&#34;/&gt;
&lt;/a&gt;
&lt;/div&gt;
&lt;div data-type=&#34;template&#34; class=&#34;card&#34;&gt;
&lt;a id=&#34;ef8a6&#34; href=&#34;../../img/IMG_20181024_180354_405.jpg&#34; data-lightbox=&#34;name-of-gallery&#34; data-title=&#34;IMG_20181024_180354_405.jpg - IMG - 2018-10-24 - 180354 - 405 - rQV - ef8a6&#34;&gt;
&lt;img class=&#34;card-img-top&#34; src=&#34;../../img/IMG_20181024_180354_405.jpg&#34; width=&#34;80px&#34; height=&#34;auto&#34;/&gt;
&lt;/a&gt;
&lt;/div&gt;
&lt;div data-type=&#34;template&#34; class=&#34;card&#34;&gt;
&lt;a id=&#34;ef8a6&#34; href=&#34;../../img/IMG_20181024_180354_425.jpg&#34; data-lightbox=&#34;name-of-gallery&#34; data-title=&#34;IMG_20181024_180354_425.jpg - IMG - 2018-10-24 - 180354 - 425 - mZR - ef8a6&#34;&gt;
&lt;img class=&#34;card-img-top&#34; src=&#34;../../img/IMG_20181024_180354_425.jpg&#34; width=&#34;80px&#34; height=&#34;auto&#34;/&gt;
&lt;/a&gt;
&lt;/div&gt;
&lt;div data-type=&#34;template&#34; class=&#34;card&#34;&gt;
&lt;a id=&#34;ef8a6&#34; href=&#34;../../img/IMG_20181024_180354_432.jpg&#34; data-lightbox=&#34;name-of-gallery&#34; data-title=&#34;IMG_20181024_180354_432.jpg - IMG - 2018-10-24 - 180354 - 432 - 3LY - ef8a6&#34;&gt;
&lt;img class=&#34;card-img-top&#34; src=&#34;../../img/IMG_20181024_180354_432.jpg&#34; width=&#34;80px&#34; height=&#34;auto&#34;/&gt;
&lt;/a&gt;
&lt;/div&gt;
&lt;div data-type=&#34;template&#34; class=&#34;card&#34;&gt;
&lt;a id=&#34;ef8a6&#34; href=&#34;../../img/IMG_20181024_183858_737.jpg&#34; data-lightbox=&#34;name-of-gallery&#34; data-title=&#34;IMG_20181024_183858_737.jpg - IMG - 2018-10-24 - 183858 - 737 - WK4 - ef8a6&#34;&gt;
&lt;img class=&#34;card-img-top&#34; src=&#34;../../img/IMG_20181024_183858_737.jpg&#34; width=&#34;80px&#34; height=&#34;auto&#34;/&gt;
&lt;/a&gt;
&lt;/div&gt;
&lt;div data-type=&#34;template&#34; class=&#34;card&#34;&gt;
&lt;a id=&#34;ef8a6&#34; href=&#34;../../img/IMG_20181025_183729_821.jpg&#34; data-lightbox=&#34;name-of-gallery&#34; data-title=&#34;IMG_20181025_183729_821.jpg - IMG - 2018-10-25 - 183729 - 821 - opR - ef8a6&#34;&gt;
&lt;img class=&#34;card-img-top&#34; src=&#34;../../img/IMG_20181025_183729_821.jpg&#34; width=&#34;80px&#34; height=&#34;auto&#34;/&gt;
&lt;/a&gt;
&lt;/div&gt;
&lt;div data-type=&#34;template&#34; class=&#34;card&#34;&gt;
&lt;a id=&#34;ef8a6&#34; href=&#34;../../img/IMG_20181026_142940_957.jpg&#34; data-lightbox=&#34;name-of-gallery&#34; data-title=&#34;IMG_20181026_142940_957.jpg - IMG - 2018-10-26 - 142940 - 957 - xJEy - ef8a6&#34;&gt;
&lt;img class=&#34;card-img-top&#34; src=&#34;../../img/IMG_20181026_142940_957.jpg&#34; width=&#34;80px&#34; height=&#34;auto&#34;/&gt;
&lt;/a&gt;
&lt;/div&gt;
&lt;div data-type=&#34;template&#34; class=&#34;card&#34;&gt;
&lt;a id=&#34;ef8a6&#34; href=&#34;../../img/IMG_20181119_172905_259.jpg&#34; data-lightbox=&#34;name-of-gallery&#34; data-title=&#34;IMG_20181119_172905_259.jpg - IMG - 2018-11-19 - 172905 - 259 - zMW - ef8a6&#34;&gt;
&lt;img class=&#34;card-img-top&#34; src=&#34;../../img/IMG_20181119_172905_259.jpg&#34; width=&#34;80px&#34; height=&#34;auto&#34;/&gt;
&lt;/a&gt;
&lt;/div&gt;
&lt;div data-type=&#34;template&#34; class=&#34;card&#34;&gt;
&lt;a id=&#34;ef8a6&#34; href=&#34;../../img/IMG_20181213_094058_994.jpg&#34; data-lightbox=&#34;name-of-gallery&#34; data-title=&#34;IMG_20181213_094058_994.jpg - IMG - 2018-12-13 - 094058 - 994 - laaX - ef8a6&#34;&gt;
&lt;img class=&#34;card-img-top&#34; src=&#34;../../img/IMG_20181213_094058_994.jpg&#34; width=&#34;80px&#34; height=&#34;auto&#34;/&gt;
&lt;/a&gt;
&lt;/div&gt;
&lt;div data-type=&#34;template&#34; class=&#34;card&#34;&gt;
&lt;a id=&#34;ef8a6&#34; href=&#34;../../img/IMG_20181215_090527_868.jpg&#34; data-lightbox=&#34;name-of-gallery&#34; data-title=&#34;IMG_20181215_090527_868.jpg - IMG - 2018-12-15 - 090527 - 868 - LzX - ef8a6&#34;&gt;
&lt;img class=&#34;card-img-top&#34; src=&#34;../../img/IMG_20181215_090527_868.jpg&#34; width=&#34;80px&#34; height=&#34;auto&#34;/&gt;
&lt;/a&gt;
&lt;/div&gt;
&lt;div data-type=&#34;template&#34; class=&#34;card&#34;&gt;
&lt;a id=&#34;ef8a6&#34; href=&#34;../../img/IMG_20181224_194148_000.jpg&#34; data-lightbox=&#34;name-of-gallery&#34; data-title=&#34;IMG_20181224_194148_000.jpg - IMG - 2018-12-24 - 194148 - 000 - 5vJ - ef8a6&#34;&gt;
&lt;img class=&#34;card-img-top&#34; src=&#34;../../img/IMG_20181224_194148_000.jpg&#34; width=&#34;80px&#34; height=&#34;auto&#34;/&gt;
&lt;/a&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;script&gt;/*!
 * Lightbox v2.11.3
 * by Lokesh Dhakar
 *
 * More info:
 * http://lokeshdhakar.com/projects/lightbox2/
 *
 * Copyright Lokesh Dhakar
 * Released under the MIT license
 * https://github.com/lokesh/lightbox2/blob/master/LICENSE
 *
 * @preserve
 */
!function(a,b){&#34;function&#34;==typeof define&amp;&amp;define.amd?define([&#34;jquery&#34;],b):&#34;object&#34;==typeof exports?module.exports=b(require(&#34;jquery&#34;)):a.lightbox=b(a.jQuery)}(this,function(a){function b(b){this.album=[],this.currentImageIndex=void 0,this.init(),this.options=a.extend({},this.constructor.defaults),this.option(b)}return b.defaults={albumLabel:&#34;Image %1 of %2&#34;,alwaysShowNavOnTouchDevices:!1,fadeDuration:600,fitImagesInViewport:!0,imageFadeDuration:600,positionFromTop:50,resizeDuration:700,showImageNumberLabel:!0,wrapAround:!1,disableScrolling:!1,sanitizeTitle:!1},b.prototype.option=function(b){a.extend(this.options,b)},b.prototype.imageCountLabel=function(a,b){return this.options.albumLabel.replace(/%1/g,a).replace(/%2/g,b)},b.prototype.init=function(){var b=this;a(document).ready(function(){b.enable(),b.build()})},b.prototype.enable=function(){var b=this;a(&#34;body&#34;).on(&#34;click&#34;,&#34;a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]&#34;,function(c){return b.start(a(c.currentTarget)),!1})},b.prototype.build=function(){if(!(a(&#34;#lightbox&#34;).length&gt;0)){var b=this;a(&#39;&lt;div id=&#34;lightboxOverlay&#34; tabindex=&#34;-1&#34; class=&#34;lightboxOverlay&#34;&gt;&lt;/div&gt;&lt;div id=&#34;lightbox&#34; tabindex=&#34;-1&#34; class=&#34;lightbox&#34;&gt;&lt;div class=&#34;lb-outerContainer&#34;&gt;&lt;div class=&#34;lb-container&#34;&gt;&lt;img class=&#34;lb-image&#34; src=&#34;data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==&#34; alt=&#34;&#34;/&gt;&lt;div class=&#34;lb-nav&#34;&gt;&lt;a class=&#34;lb-prev&#34; aria-label=&#34;Previous image&#34; href=&#34;&#34; &gt;&lt;/a&gt;&lt;a class=&#34;lb-next&#34; aria-label=&#34;Next image&#34; href=&#34;&#34; &gt;&lt;/a&gt;&lt;/div&gt;&lt;div class=&#34;lb-loader&#34;&gt;&lt;a class=&#34;lb-cancel&#34;&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div class=&#34;lb-dataContainer&#34;&gt;&lt;div class=&#34;lb-data&#34;&gt;&lt;div class=&#34;lb-details&#34;&gt;&lt;span class=&#34;lb-caption&#34;&gt;&lt;/span&gt;&lt;span class=&#34;lb-number&#34;&gt;&lt;/span&gt;&lt;/div&gt;&lt;div class=&#34;lb-closeContainer&#34;&gt;&lt;a class=&#34;lb-close&#34;&gt;&lt;/a&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&#39;).appendTo(a(&#34;body&#34;)),this.$lightbox=a(&#34;#lightbox&#34;),this.$overlay=a(&#34;#lightboxOverlay&#34;),this.$outerContainer=this.$lightbox.find(&#34;.lb-outerContainer&#34;),this.$container=this.$lightbox.find(&#34;.lb-container&#34;),this.$image=this.$lightbox.find(&#34;.lb-image&#34;),this.$nav=this.$lightbox.find(&#34;.lb-nav&#34;),this.containerPadding={top:parseInt(this.$container.css(&#34;padding-top&#34;),10),right:parseInt(this.$container.css(&#34;padding-right&#34;),10),bottom:parseInt(this.$container.css(&#34;padding-bottom&#34;),10),left:parseInt(this.$container.css(&#34;padding-left&#34;),10)},this.imageBorderWidth={top:parseInt(this.$image.css(&#34;border-top-width&#34;),10),right:parseInt(this.$image.css(&#34;border-right-width&#34;),10),bottom:parseInt(this.$image.css(&#34;border-bottom-width&#34;),10),left:parseInt(this.$image.css(&#34;border-left-width&#34;),10)},this.$overlay.hide().on(&#34;click&#34;,function(){return b.end(),!1}),this.$lightbox.hide().on(&#34;click&#34;,function(c){&#34;lightbox&#34;===a(c.target).attr(&#34;id&#34;)&amp;&amp;b.end()}),this.$outerContainer.on(&#34;click&#34;,function(c){return&#34;lightbox&#34;===a(c.target).attr(&#34;id&#34;)&amp;&amp;b.end(),!1}),this.$lightbox.find(&#34;.lb-prev&#34;).on(&#34;click&#34;,function(){return 0===b.currentImageIndex?b.changeImage(b.album.length-1):b.changeImage(b.currentImageIndex-1),!1}),this.$lightbox.find(&#34;.lb-next&#34;).on(&#34;click&#34;,function(){return b.currentImageIndex===b.album.length-1?b.changeImage(0):b.changeImage(b.currentImageIndex+1),!1}),this.$nav.on(&#34;mousedown&#34;,function(a){3===a.which&amp;&amp;(b.$nav.css(&#34;pointer-events&#34;,&#34;none&#34;),b.$lightbox.one(&#34;contextmenu&#34;,function(){setTimeout(function(){this.$nav.css(&#34;pointer-events&#34;,&#34;auto&#34;)}.bind(b),0)}))}),this.$lightbox.find(&#34;.lb-loader, .lb-close&#34;).on(&#34;click&#34;,function(){return b.end(),!1})}},b.prototype.start=function(b){function c(a){d.album.push({alt:a.attr(&#34;data-alt&#34;),link:a.attr(&#34;href&#34;),title:a.attr(&#34;data-title&#34;)||a.attr(&#34;title&#34;)})}var d=this,e=a(window);e.on(&#34;resize&#34;,a.proxy(this.sizeOverlay,this)),this.sizeOverlay(),this.album=[];var f,g=0,h=b.attr(&#34;data-lightbox&#34;);if(h){f=a(b.prop(&#34;tagName&#34;)+&#39;[data-lightbox=&#34;&#39;+h+&#39;&#34;]&#39;);for(var i=0;i&lt;f.length;i=++i)c(a(f[i])),f[i]===b[0]&amp;&amp;(g=i)}else if(&#34;lightbox&#34;===b.attr(&#34;rel&#34;))c(b);else{f=a(b.prop(&#34;tagName&#34;)+&#39;[rel=&#34;&#39;+b.attr(&#34;rel&#34;)+&#39;&#34;]&#39;);for(var j=0;j&lt;f.length;j=++j)c(a(f[j])),f[j]===b[0]&amp;&amp;(g=j)}var k=e.scrollTop()+this.options.positionFromTop,l=e.scrollLeft();this.$lightbox.css({top:k+&#34;px&#34;,left:l+&#34;px&#34;}).fadeIn(this.options.fadeDuration),this.options.disableScrolling&amp;&amp;a(&#34;body&#34;).addClass(&#34;lb-disable-scrolling&#34;),this.changeImage(g)},b.prototype.changeImage=function(b){var c=this,d=this.album[b].link,e=d.split(&#34;.&#34;).slice(-1)[0],f=this.$lightbox.find(&#34;.lb-image&#34;);this.disableKeyboardNav(),this.$overlay.fadeIn(this.options.fadeDuration),a(&#34;.lb-loader&#34;).fadeIn(&#34;slow&#34;),this.$lightbox.find(&#34;.lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption&#34;).hide(),this.$outerContainer.addClass(&#34;animating&#34;);var g=new Image;g.onload=function(){var h,i,j,k,l,m;f.attr({alt:c.album[b].alt,src:d}),a(g),f.width(g.width),f.height(g.height),m=a(window).width(),l=a(window).height(),k=m-c.containerPadding.left-c.containerPadding.right-c.imageBorderWidth.left-c.imageBorderWidth.right-20,j=l-c.containerPadding.top-c.containerPadding.bottom-c.imageBorderWidth.top-c.imageBorderWidth.bottom-c.options.positionFromTop-70,&#34;svg&#34;===e&amp;&amp;(f.width(k),f.height(j)),c.options.fitImagesInViewport?(c.options.maxWidth&amp;&amp;c.options.maxWidth&lt;k&amp;&amp;(k=c.options.maxWidth),c.options.maxHeight&amp;&amp;c.options.maxHeight&lt;j&amp;&amp;(j=c.options.maxHeight)):(k=c.options.maxWidth||g.width||k,j=c.options.maxHeight||g.height||j),(g.width&gt;k||g.height&gt;j)&amp;&amp;(g.width/k&gt;g.height/j?(i=k,h=parseInt(g.height/(g.width/i),10),f.width(i),f.height(h)):(h=j,i=parseInt(g.width/(g.height/h),10),f.width(i),f.height(h))),c.sizeContainer(f.width(),f.height())},g.src=this.album[b].link,this.currentImageIndex=b},b.prototype.sizeOverlay=function(){var b=this;setTimeout(function(){b.$overlay.width(a(document).width()).height(a(document).height())},0)},b.prototype.sizeContainer=function(a,b){function c(){d.$lightbox.find(&#34;.lb-dataContainer&#34;).width(g),d.$lightbox.find(&#34;.lb-prevLink&#34;).height(h),d.$lightbox.find(&#34;.lb-nextLink&#34;).height(h),d.$overlay.focus(),d.showImage()}var d=this,e=this.$outerContainer.outerWidth(),f=this.$outerContainer.outerHeight(),g=a+this.containerPadding.left+this.containerPadding.right+this.imageBorderWidth.left+this.imageBorderWidth.right,h=b+this.containerPadding.top+this.containerPadding.bottom+this.imageBorderWidth.top+this.imageBorderWidth.bottom;e!==g||f!==h?this.$outerContainer.animate({width:g,height:h},this.options.resizeDuration,&#34;swing&#34;,function(){c()}):c()},b.prototype.showImage=function(){this.$lightbox.find(&#34;.lb-loader&#34;).stop(!0).hide(),this.$lightbox.find(&#34;.lb-image&#34;).fadeIn(this.options.imageFadeDuration),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},b.prototype.updateNav=function(){var a=!1;try{document.createEvent(&#34;TouchEvent&#34;),a=!!this.options.alwaysShowNavOnTouchDevices}catch(a){}this.$lightbox.find(&#34;.lb-nav&#34;).show(),this.album.length&gt;1&amp;&amp;(this.options.wrapAround?(a&amp;&amp;this.$lightbox.find(&#34;.lb-prev, .lb-next&#34;).css(&#34;opacity&#34;,&#34;1&#34;),this.$lightbox.find(&#34;.lb-prev, .lb-next&#34;).show()):(this.currentImageIndex&gt;0&amp;&amp;(this.$lightbox.find(&#34;.lb-prev&#34;).show(),a&amp;&amp;this.$lightbox.find(&#34;.lb-prev&#34;).css(&#34;opacity&#34;,&#34;1&#34;)),this.currentImageIndex&lt;this.album.length-1&amp;&amp;(this.$lightbox.find(&#34;.lb-next&#34;).show(),a&amp;&amp;this.$lightbox.find(&#34;.lb-next&#34;).css(&#34;opacity&#34;,&#34;1&#34;))))},b.prototype.updateDetails=function(){var a=this;if(void 0!==this.album[this.currentImageIndex].title&amp;&amp;&#34;&#34;!==this.album[this.currentImageIndex].title){var b=this.$lightbox.find(&#34;.lb-caption&#34;);this.options.sanitizeTitle?b.text(this.album[this.currentImageIndex].title):b.html(this.album[this.currentImageIndex].title),b.fadeIn(&#34;fast&#34;)}if(this.album.length&gt;1&amp;&amp;this.options.showImageNumberLabel){var c=this.imageCountLabel(this.currentImageIndex+1,this.album.length);this.$lightbox.find(&#34;.lb-number&#34;).text(c).fadeIn(&#34;fast&#34;)}else this.$lightbox.find(&#34;.lb-number&#34;).hide();this.$outerContainer.removeClass(&#34;animating&#34;),this.$lightbox.find(&#34;.lb-dataContainer&#34;).fadeIn(this.options.resizeDuration,function(){return a.sizeOverlay()})},b.prototype.preloadNeighboringImages=function(){if(this.album.length&gt;this.currentImageIndex+1){(new Image).src=this.album[this.currentImageIndex+1].link}if(this.currentImageIndex&gt;0){(new Image).src=this.album[this.currentImageIndex-1].link}},b.prototype.enableKeyboardNav=function(){this.$lightbox.on(&#34;keyup.keyboard&#34;,a.proxy(this.keyboardAction,this)),this.$overlay.on(&#34;keyup.keyboard&#34;,a.proxy(this.keyboardAction,this))},b.prototype.disableKeyboardNav=function(){this.$lightbox.off(&#34;.keyboard&#34;),this.$overlay.off(&#34;.keyboard&#34;)},b.prototype.keyboardAction=function(a){var b=a.keyCode;27===b?(a.stopPropagation(),this.end()):37===b?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&amp;&amp;this.album.length&gt;1&amp;&amp;this.changeImage(this.album.length-1):39===b&amp;&amp;(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&amp;&amp;this.album.length&gt;1&amp;&amp;this.changeImage(0))},b.prototype.end=function(){this.disableKeyboardNav(),a(window).off(&#34;resize&#34;,this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),this.options.disableScrolling&amp;&amp;a(&#34;body&#34;).removeClass(&#34;lb-disable-scrolling&#34;)},new b});
//# sourceMappingURL=lightbox.min.map&lt;/script&gt;
&lt;style type=&#34;text/css&#34;&gt;

.card-deck {
  display: flex;
  justify-content: flex-start;
  flex-flow: row wrap;
  align-items: stretch;
  padding: 20px;
  border-spacing: 1.25rem 0;
}
.card-deck .card {
  /*display: block;*/
  flex-basis: 21%; /* change this value for each breakpoint*/
}
.card {
    font-size: 1em;
    overflow: hidden;
    margin: 20px;
    padding: 0;
    border: none;
    border-radius: .28571429rem;
    box-shadow: 0 1px 3px 0 #d4d4d5, 0 0 0 1px #d4d4d5;
    @media(min-width: 56rem) {
      width: 22.3333%;
    }
}

.card-block {
    font-size: 1em;
    position: relative;
    margin: 0;
    padding: 1em;
    border: none;
    border-top: 1px solid rgba(34, 36, 38, .1);
    box-shadow: none;
}

.card-img-top {
    display: block;
    width: 100%;
    height: auto;
}&lt;/style&gt;
&lt;/div&gt;
&lt;/div&gt;
</description>
        </item>
        <item>
        <title>Filtering Spatial Data with Crosstalk</title>
        <link>https://mrjoh3.github.io/p/filtering-spatial-data/</link>
        <pubDate>Wed, 25 Jul 2018 00:00:00 +0000</pubDate>
        
        <guid>https://mrjoh3.github.io/p/filtering-spatial-data/</guid>
        <description>&lt;img src="https://mrjoh3.github.io/img/filter_header.jpg" alt="Featured image of post Filtering Spatial Data with Crosstalk" /&gt;
&lt;script src=&#34;https://mrjoh3.github.io/rmarkdown-libs/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;


&lt;link rel=&#34;stylesheet&#34; href=&#34;../../highlight/a11y-dark.min.css&#34;&gt;
&lt;script src=&#34;https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/highlight.min.js&#34;&gt;&lt;/script&gt;
&lt;script&gt;hljs.highlightAll();&lt;/script&gt;
&lt;p&gt;In a &lt;a href=&#34;https://mrjoh3.github.io/2018/07/20/animating-spatial-data/&#34;&gt;previous post&lt;/a&gt; I wanted to look at the daily pattern of motor vehicle accidents across the state of Victoria. What I am really interested in though is the accidents in my local area.&lt;/p&gt;
&lt;p&gt;To do this I am going to use &lt;code&gt;leaflet&lt;/code&gt;, &lt;code&gt;sf&lt;/code&gt; to handle all the spatial data and &lt;code&gt;crosstalk&lt;/code&gt; to filter the data visible in the map. The &lt;code&gt;crosstalk&lt;/code&gt; package enables a level of interactivity that is usually reserved for more complex server (&lt;code&gt;shiny&lt;/code&gt;) based applications.&lt;/p&gt;
&lt;p&gt;The data is from the &lt;a href=&#34;https://vicroadsopendata-vicroadsmaps.opendata.arcgis.com/datasets/c2a69622ebad42e7baaa8167daa72127_0&#34;&gt;VicRoads open data portal&lt;/a&gt;. The portal has an API but I have previously downloaded the entire data set as a shapefile. There are more than 75 thousand accidents recorded in the data set but I am only looking at accidents related to alcohol for the years 2015 through 2017.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;
library(sf)
library(dplyr)
library(leaflet)
library(crosstalk)
library(lubridate)
library(htmltools)


shp &amp;lt;- st_read(&amp;#39;~/Documents/Matt/GIS/shp&amp;#39;,&amp;#39;Crashes_Last_Five_Years&amp;#39;, 
               quiet = TRUE, stringsAsFactors = FALSE) %&amp;gt;%
  mutate(date = as.Date(as.character(ACCIDENT_D), &amp;#39;%d/%m/%Y&amp;#39;),
         year = year(date)) %&amp;gt;%
    filter(ALCOHOL_RE == &amp;#39;Yes&amp;#39;)

sd &amp;lt;- SharedData$new(shp)

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Once the data is imported and cleaned it is inserted into a &lt;code&gt;crosstalk::SharedData$new()&lt;/code&gt; object. This creates a common data input for all interactive objects such as UI elements and compatible widgets. For a complete list of compatible widgets see the &lt;a href=&#34;https://rstudio.github.io/crosstalk/widgets.html&#34;&gt;crosstalk reference page&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Am minimal example can be just two lines of additional code which results in a UI slider connected to the date field and a leaflet map. Adjusting the slider will filter the markers visible in the map.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;
filter_slider(&amp;quot;date&amp;quot;, &amp;quot;&amp;quot;, sd, column=~date, step=10, width=800)
leaflet(sd) %&amp;gt;% addTiles() %&amp;gt;% addMarkers()

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;But let’s add some additional layers of interactivity. &lt;code&gt;Crosstalk&lt;/code&gt; has three UI filters built-in; slider, check-box and select. In the code below I am creating and saving the UI elements in order to have a little more control fitting them together.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;
date_filter &amp;lt;- filter_slider(&amp;quot;date&amp;quot;, &amp;quot;&amp;quot;, sd, column = ~date, 
                             step = NULL, width = &amp;#39;100%&amp;#39;, dragRange = TRUE)

year_filter &amp;lt;- filter_checkbox(&amp;quot;year&amp;quot;, &amp;quot;Year&amp;quot;, sd, group = ~year, 
                               inline = FALSE)

day_filter &amp;lt;- filter_checkbox(&amp;quot;day&amp;quot;, &amp;quot;Day of the Week&amp;quot;, sd, group = ~DAY_OF_WEE, 
                              inline = FALSE)

severity_filter &amp;lt;- filter_checkbox(&amp;quot;sev&amp;quot;, &amp;quot;Severity&amp;quot;, sd, group = ~SEVERITY, 
                                   inline = FALSE)

type_filter &amp;lt;- filter_checkbox(&amp;quot;type&amp;quot;, &amp;quot;Type&amp;quot;, sd, group = ~ACCIDENT_1, 
                               inline = FALSE)

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;a href=&#34;https://rstudio.github.io/leaflet/&#34;&gt;Rstudio’s leaflet&lt;/a&gt; package is the most ubiquitous method for incorporating an interactive map. In this post I am not going to discuss all the options I use but will include the code. To make the map look and feel how I want, I will use &lt;code&gt;addPopups&lt;/code&gt; and &lt;code&gt;addProviderTiles&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Originally I intended to include &lt;code&gt;addAwesomeMarkers&lt;/code&gt;, but with this data set there are too many points for the markers to look good and add meaning to the final map. Instead I will use transparent circle markers to give a sense of density where points overlap.&lt;/p&gt;
&lt;p&gt;Now, I use &lt;code&gt;leaflet&lt;/code&gt; maps a lot. They are incredibly versatile with a wealth of options (see &lt;a href=&#34;https://rstudio.github.io/leaflet/&#34;&gt;documentation&lt;/a&gt; to get started). They are also very simple. In the code below you can see my standard setup (excluding &lt;code&gt;addCircleMarkers()&lt;/code&gt;). I save this as a snippet and insert it each time I make a map. This means that my maps are consistent and that I can get something done in a few minutes just focusing on the new layer.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;
map &amp;lt;- leaflet(sd, width = &amp;#39;100%&amp;#39;) %&amp;gt;% 
  addProviderTiles(&amp;quot;CartoDB.Positron&amp;quot;, group = &amp;#39;Default&amp;#39;) %&amp;gt;%
  addProviderTiles(&amp;quot;Esri.WorldImagery&amp;quot;, group = &amp;#39;Aerial&amp;#39;) %&amp;gt;%
  addProviderTiles(&amp;quot;OpenStreetMap.Mapnik&amp;quot;, group = &amp;#39;Street&amp;#39;) %&amp;gt;%
  addProviderTiles(&amp;quot;OpenTopoMap&amp;quot;, group = &amp;#39;Terrain&amp;#39;) %&amp;gt;%
  addScaleBar(&amp;#39;bottomright&amp;#39;) %&amp;gt;%
  addCircleMarkers(group = &amp;#39;Accidents&amp;#39;, 
                   stroke = FALSE, 
                   opacity = 0.4,
                   fillColor = ~sapply(SEVERITY, switch, USE.NAMES = FALSE,
                                    &amp;#39;Fatal accident&amp;#39; = &amp;#39;#a50f15&amp;#39;,
                                    &amp;#39;Serious injury accident&amp;#39; = &amp;#39;#de2d26&amp;#39;,
                                    &amp;#39;Other injury accident&amp;#39; = &amp;#39;#fb6a4a&amp;#39; 
                                     ),
                   radius = ~sapply(SEVERITY, switch, USE.NAMES = FALSE,
                                    &amp;#39;Fatal accident&amp;#39; = 10,
                                    &amp;#39;Serious injury accident&amp;#39; = 7,
                                    &amp;#39;Other injury accident&amp;#39; = 5
                                     ),
                   popup = ~paste0(&amp;#39;&amp;lt;h3&amp;gt;Some Accident Details&amp;lt;/h3&amp;gt;&amp;lt;br&amp;gt;&amp;#39;,
                                   &amp;#39;&amp;lt;b&amp;gt;Severity&amp;lt;/b&amp;gt;: &amp;#39;, SEVERITY, &amp;#39;&amp;lt;br&amp;gt;&amp;#39;,
                                   &amp;#39;&amp;lt;b&amp;gt;Type of Accident&amp;lt;/b&amp;gt;: &amp;#39;, ACCIDENT_1, &amp;#39;&amp;lt;br&amp;gt;&amp;#39;,
                                   &amp;#39;&amp;lt;b&amp;gt;Light Conditions&amp;lt;/b&amp;gt;: &amp;#39;, LIGHT_COND, &amp;#39;&amp;lt;br&amp;gt;&amp;#39;,
                                   &amp;#39;&amp;lt;b&amp;gt;Road Geometry&amp;lt;/b&amp;gt;: &amp;#39;, ROAD_GEOME, &amp;quot;&amp;lt;br&amp;gt;&amp;quot;,
                                   &amp;#39;&amp;lt;b&amp;gt;Speed Zone&amp;lt;/b&amp;gt;: &amp;#39;, SPEED_ZONE, &amp;#39;&amp;lt;br&amp;gt;&amp;#39;,
                                   &amp;#39;&amp;lt;b&amp;gt;Number of People&amp;lt;/b&amp;gt;: &amp;#39;, TOTAL_PERS, &amp;#39;&amp;lt;br&amp;gt;&amp;#39;,
                                   &amp;#39;&amp;lt;b&amp;gt;Persons Injured or Fatality&amp;lt;/b&amp;gt;: &amp;#39;, INJ_OR_FAT)
                   ) %&amp;gt;%
  addLayersControl(
        baseGroups = c(&amp;quot;Default&amp;quot;, &amp;quot;Aerial&amp;quot;, &amp;quot;Street&amp;quot;, &amp;quot;Terrain&amp;quot;),
        overlayGroups = &amp;#39;Accidents&amp;#39;,
        options = layersControlOptions(collapsed = TRUE)
      )

&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now we have all of the elements we need. These could have been added directly to the &lt;code&gt;rmarkdown&lt;/code&gt; page with each code chunk, but wrapping them in some &lt;code&gt;htmltools&lt;/code&gt; and &lt;code&gt;crosstalk&lt;/code&gt; tags makes for a slightly cleaner user experience.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;
tags$div(class=&amp;quot;well well-lg&amp;quot;,
         tagList(
           tags$h2(&amp;#39;Alcohol Related Motor Vehicle Accidents 2012 - 2017&amp;#39;),
           date_filter,
           map,
           bscols(day_filter,
                     list(year_filter,
                          severity_filter),
                     type_filter)
                    )
            )    

&lt;/code&gt;&lt;/pre&gt;
&lt;iframe allowtransparency=&#34;true&#34; src=&#34;../../rmd/2018-07-25-filtering-spatial-data_content.html&#34; id=&#34;IframeId&#34; style=&#34;border:none;width:100%;height:1000px;background-color:#424242&#34;&gt;
&lt;/iframe&gt;
</description>
        </item>
        <item>
        <title>Another blog about a blog</title>
        <link>https://mrjoh3.github.io/p/another-blog-about-a-blog/</link>
        <pubDate>Sat, 21 Jul 2018 00:00:00 +0000</pubDate>
        
        <guid>https://mrjoh3.github.io/p/another-blog-about-a-blog/</guid>
        <description>&lt;img src="https://mrjoh3.github.io/img/MRJ_2020_DSC9204_narrow.png" alt="Featured image of post Another blog about a blog" /&gt;
&lt;script src=&#34;https://mrjoh3.github.io/rmarkdown-libs/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;


&lt;p&gt;Currently I mostly work with &lt;code&gt;R&lt;/code&gt; and use it for statistics, modelling, GIS and web / pdf based reporting. Therefore the choice of &lt;code&gt;Blogdown&lt;/code&gt; seemed simple enough. You will find many existing posts about others setting up their blogs in a similar way. Further, the book &lt;a href=&#34;https://bookdown.org/yihui/blogdown/&#34;&gt;blogdown: Creating Websites with R Markdown&lt;/a&gt; by &lt;a href=&#34;https://bookdown.org/yihui/blogdown/yihui-xie.html&#34;&gt;Yihui Xie&lt;/a&gt; &lt;em&gt;et al.&lt;/em&gt; covers everything you need to know about the process. Here, I am only going to discuss the few specific issues I had to deal with to get started.&lt;/p&gt;
&lt;div id=&#34;choosing-a-theme-and-installing&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Choosing a Theme and Installing&lt;/h2&gt;
&lt;p&gt;There are many themes available at &lt;a href=&#34;https://themes.gohugo.io&#34;&gt;Hugo Themes&lt;/a&gt;. This one is called &lt;a href=&#34;https://github.com/jpescador/hugo-future-imperfect&#34;&gt;Hugo Future Imperfect&lt;/a&gt; by &lt;a href=&#34;https://github.com/jpescador&#34;&gt;Julio Pescdor&lt;/a&gt;. Once you have chosen it is time to begin. Themes are loaded directly from their Github repositories so you will need the themes Github username and repository name.&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;
install.packages(&amp;quot;blogdown&amp;quot;)
blogdown::install_hugo()

blogdown::new_site(theme = &amp;quot;jpescador/hugo-future-imperfect&amp;quot;)
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now everything is up an running but it is easier to test everything if you have some content. The &lt;code&gt;Blogdown&lt;/code&gt; package includes a series of addins that makes this process simple, just select &lt;code&gt;New Post&lt;/code&gt; from the &lt;code&gt;Addins&lt;/code&gt; menu.&lt;/p&gt;
&lt;div class=&#34;figure&#34;&gt;
&lt;img src=&#34;https://mrjoh3.github.io/post/2018-07-20-another-blog-about-a-blog_files/new_post.png&#34; alt=&#34;&#34; /&gt;
&lt;p class=&#34;caption&#34;&gt;new post screenshot&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div id=&#34;configuring-the-site&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Configuring the Site&lt;/h2&gt;
&lt;p&gt;With some simple content generated use &lt;code&gt;blogdown:::serve_site()&lt;/code&gt; to preview your site. At this stage it will not look exactly as you expected. Each theme has a &lt;code&gt;config.toml&lt;/code&gt; that is used to setup each site. Most themes will have detailed instructions or an &lt;a href=&#34;https://github.com/jpescador/hugo-future-imperfect/blob/master/exampleSite/config.toml&#34;&gt;example project&lt;/a&gt; for your reference. This file is quite readable so you can just scan through and copy the settings you need.&lt;/p&gt;
&lt;p&gt;Be sure to read any documentation that comes with the theme as they are all different and may have some simple gotchas. Here the &lt;code&gt;CSS&lt;/code&gt; files did not want to load until I found that I had to add the setting &lt;code&gt;relativeURLs = true&lt;/code&gt;. Also play around with all the settings in the &lt;code&gt;config.toml&lt;/code&gt; file just so you know what they do.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;deploying&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Deploying&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Hugo&lt;/code&gt; generates static sites so there are many deployment options. The simplest is to run &lt;code&gt;blogdown::build_site()&lt;/code&gt; and then copy the contents of the &lt;code&gt;public&lt;/code&gt; folder to your hosting service. I won’t go though them as the &lt;a href=&#34;https://bookdown.org/yihui/blogdown/deployment.html&#34;&gt;blogdown book&lt;/a&gt; mentioned above goes into great detail.&lt;/p&gt;
&lt;p&gt;As I am too cheap to pay for a hosting service and want to make use of my Github pages URL I decided (against the suggestions in the book) to use Github and Travis. After referring to the blogdown book for instructions. The only difficulty was linking the Github repository with Travis with permissions to write back to the repository. &lt;a href=&#34;https://medium.com/zendesk-engineering/how-to-create-a-website-like-freshswift-net-using-hugo-travis-ci-and-github-pages-67be6f480298&#34;&gt;This post&lt;/a&gt; contained all the details necessary for setting an environment variable in Travis.&lt;/p&gt;
&lt;p&gt;This worked nicely &lt;strong&gt;BUT&lt;/strong&gt;…&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;actually-deploying&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Actually Deploying&lt;/h2&gt;
&lt;p&gt;When Travis builds the site it runs &lt;code&gt;blogdown::build_site()&lt;/code&gt; just as you would on your computer. Now if you have an &lt;code&gt;.Rmd&lt;/code&gt; post that uses &lt;code&gt;R&lt;/code&gt; packages, they are installed on your computer but they are not on Travis. Travis can be configured to install the packages, but you would have to do this each time you add use a new package. I intend to experiment with a lot of different packages and this seems like a lot of effort when you can simply build the site locally and move the static files.&lt;/p&gt;
&lt;p&gt;After several dead-ends and messing around with folder names to appease the Github gods (who were not appeased), I came across instructions on the &lt;a href=&#34;https://gohugo.io/hosting-and-deployment/hosting-on-github/#github-user-or-organization-pages&#34;&gt;GoHugo website&lt;/a&gt;. This involved creating 2 repositories one called &lt;code&gt;blog&lt;/code&gt; and the other &lt;code&gt;&amp;lt;USER&amp;gt;.github.io&lt;/code&gt; and then setting up the public folder of &lt;code&gt;blog&lt;/code&gt; as a git sub-module that commits to &lt;code&gt;&amp;lt;USER&amp;gt;.github.io&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The only drawback is that if you use the git GUI in &lt;code&gt;RStudio&lt;/code&gt; the sub-module does not commit. But this is likely user error as my knowledge of git is limited. For now I am using the terminal to push changes in the public folder.&lt;/p&gt;
&lt;pre class=&#34;bash&#34;&gt;&lt;code&gt;
# run once
git submodule add -b master git@github.com:mrjoh3/mrjoh3.github.io.git public

cd public

git pull

# after updates
git add .
git commit -m &amp;#39;some message&amp;#39;
git push origin master
&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div id=&#34;lessons-learnt&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Lessons Learnt&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Blogdown&lt;/code&gt; has been fantastic, I had a site up and running within an hour. And this included install dependancies finding a theme and understanding the &lt;code&gt;config.toml&lt;/code&gt; file. Even with complication I only spent 3 hours getting my deployment sorted.&lt;/p&gt;
&lt;p&gt;What I should have done from the beginning is think more about my own needs and requirements. All of the instructions for the different services were all clear and worked as expected. That they sometimes did not meet my needs reflects more on my preparation.&lt;/p&gt;
&lt;/div&gt;
</description>
        </item>
        <item>
        <title>Animating Spatial Data</title>
        <link>https://mrjoh3.github.io/p/animating-spatial-data/</link>
        <pubDate>Fri, 20 Jul 2018 00:00:00 +0000</pubDate>
        
        <guid>https://mrjoh3.github.io/p/animating-spatial-data/</guid>
        <description>&lt;img src="https://mrjoh3.github.io/img/snow-header.png" alt="Featured image of post Animating Spatial Data" /&gt;
&lt;script src=&#34;https://mrjoh3.github.io/rmarkdown-libs/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;


&lt;center&gt;
&lt;blockquote class=&#34;twitter-tweet&#34; data-cards=&#34;hidden&#34; data-lang=&#34;en&#34;&gt;
&lt;p lang=&#34;en&#34; dir=&#34;ltr&#34;&gt;
&lt;a href=&#34;https://twitter.com/hashtag/rstats?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#rstats&lt;/a&gt; + &lt;a href=&#34;https://twitter.com/hashtag/sf?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#sf&lt;/a&gt; + &lt;a href=&#34;https://twitter.com/hashtag/ggplot2?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#ggplot2&lt;/a&gt; + &lt;a href=&#34;https://twitter.com/hashtag/gganimate?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#gganimate&lt;/a&gt; = a great way to visualise some sobering data. Only accidents where alcohol was involved. Remember each frame only accidents from a single day. &lt;br&gt;&lt;br&gt;See code gist &lt;a href=&#34;https://t.co/wqEcYku2us&#34;&gt;https://t.co/wqEcYku2us&lt;/a&gt; and get data from &lt;a href=&#34;https://twitter.com/hashtag/vicroads?src=hash&amp;amp;ref_src=twsrc%5Etfw&#34;&gt;#vicroads&lt;/a&gt; api &lt;a href=&#34;https://t.co/cBX1kBz9iw&#34;&gt;https://t.co/cBX1kBz9iw&lt;/a&gt; &lt;a href=&#34;https://t.co/tNobkLQQQH&#34;&gt;pic.twitter.com/tNobkLQQQH&lt;/a&gt;
&lt;/p&gt;
— Matt Johnson (&lt;span class=&#34;citation&#34;&gt;@mrjoh3&lt;/span&gt;) &lt;a href=&#34;https://twitter.com/mrjoh3/status/1019564471168073728?ref_src=twsrc%5Etfw&#34;&gt;July 18, 2018&lt;/a&gt;
&lt;/blockquote&gt;
&lt;script async src=&#34;https://platform.twitter.com/widgets.js&#34; charset=&#34;utf-8&#34;&gt;&lt;/script&gt;
&lt;img src=&#34;https://mrjoh3.github.io/post/2018-07-20-animating-spatial-data_files/vic_alcohol.gif&#34; title=&#34;fig:&#34; alt=&#34;Alcohol related accidents in Victoria&#34; /&gt;
&lt;/center&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(dplyr)
library(sf)
library(ggplot2)
library(gganimate)

shp &amp;lt;- st_read(&amp;#39;~/Documents/Matt/GIS/shp&amp;#39;,&amp;#39;Crashes_Last_Five_Years&amp;#39;, quiet = TRUE) %&amp;gt;%
  filter(ALCOHOL_RE == &amp;#39;Yes&amp;#39;) %&amp;gt;%
  mutate(date = as.Date(as.character(ACCIDENT_D), &amp;#39;%d/%m/%Y&amp;#39;))
  
vic &amp;lt;- st_read(&amp;#39;~/Documents/Matt/GIS/shp&amp;#39;, &amp;#39;VIC_STATE_POLYGON_shp&amp;#39;, quiet = TRUE) 

plt &amp;lt;- ggplot() +
  geom_sf(data = vic, fill = &amp;#39;grey&amp;#39;, colour = &amp;#39;darkgrey&amp;#39;) +
  geom_sf(data = shp, aes(colour = SEVERITY)) +
  scale_color_manual(values = c(&amp;#39;red&amp;#39;, &amp;#39;orange&amp;#39; ,&amp;#39;yellow&amp;#39;)) +
  guides(colour = guide_legend(&amp;#39;&amp;#39;)) +
  theme(axis.title.x=element_blank(),
        axis.text.x=element_blank(),
        axis.ticks.x=element_blank(),
        axis.title.y=element_blank(),
        axis.text.y=element_blank(),
        axis.ticks.y=element_blank(),
        panel.background = element_rect(fill = &amp;quot;darkgrey&amp;quot;, colour = &amp;quot;darkgrey&amp;quot;),
        plot.background = element_rect(fill = &amp;quot;darkgrey&amp;quot;),
        legend.position = &amp;quot;bottom&amp;quot;,
        legend.background = element_rect(fill = &amp;quot;darkgrey&amp;quot;),
        legend.key = element_rect(fill = &amp;quot;darkgrey&amp;quot;, colour = &amp;quot;darkgrey&amp;quot;)) +
  labs(title = &amp;#39;Alcohol Related Daily Road Accidents in Victoria 2012-2017&amp;#39;,
       subtitle = &amp;#39;Date: {frame_time}&amp;#39;) +
  transition_time(date) +
  ease_aes(&amp;#39;linear&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
</description>
        </item>
        
    </channel>
</rss>
